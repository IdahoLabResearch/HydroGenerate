
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Querying data from the USGS National Water Information System</title>
    
  <link href="_static/css/theme.css" rel="stylesheet">
  <link href="_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script>
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="canonical" href="https://idaholabresearch.github.io/HydroGenerate/UserGuide_4_QueryingDataUSGS-NWIS.html" />
    <link rel="shortcut icon" href="_static/HG_icon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Cost and Revenue Calculations" href="UserGuide_5_Cost%26Revenue.html" />
    <link rel="prev" title="Flow Input Options" href="UserGuide_3_FlowOptions.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="_static/HG_horizontal.png" class="logo" alt="logo">
      
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="HydroGenerate_Introduction.html">
   HydroGenerate
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Getting Started
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="GettingStarted_1_Installation.html">
   Installation
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  User Guide
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="UserGuide_1_Introduction-Tutorial.html">
   Introduction - Tutorial
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="UserGuide_2_Diversion.html">
   Diversion Mode
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="UserGuide_3_FlowOptions.html">
   Flow Input Options
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Querying data from the USGS National Water Information System
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="UserGuide_5_Cost%26Revenue.html">
   Cost and Revenue Calculations
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="UserGuide_6_Hydrokinetics.html">
   Hydrokinetics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="UserGuide_7_HydroGenerateWorkflow.html">
   Inputs / Outputs - General Workflow
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Developer Guide
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="DeveloperGuide_1_Architecture.html">
   Architecture
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="DeveloperGuide_2_MethodsFunctions.html">
   Methods, Functions, Classes, and Input Handling
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Theory
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="Theory_1_Hydropower.html">
   Hydropower Estimation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Theory_2_Design_Flow.html">
   Design Flow Estimation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Theory_3_Efficiency.html">
   Turbine Efficiency Calculation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Theory_4_Head_loss.html">
   Head Loss Estimation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Theory_5_CostOM.html">
   Cost, O&amp;M, and Revenue Calculation
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/UserGuide_4_QueryingDataUSGS-NWIS.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/IdahoLabResearch/HydroGenerate"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/IdahoLabResearch/HydroGenerate/issues/new?title=Issue%20on%20page%20%2FUserGuide_4_QueryingDataUSGS-NWIS.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/IdahoLabResearch/HydroGenerate/jugc-docs?urlpath=tree/UserGuide_4_QueryingDataUSGS-NWIS.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#use-streamflow-data-from-a-usgs-stream-gauge">
   Use streamflow data from a USGS stream gauge.
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Querying data from the USGS National Water Information System</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#use-streamflow-data-from-a-usgs-stream-gauge">
   Use streamflow data from a USGS stream gauge.
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="querying-data-from-the-usgs-national-water-information-system">
<h1>Querying data from the USGS National Water Information System<a class="headerlink" href="#querying-data-from-the-usgs-national-water-information-system" title="Permalink to this headline">¶</a></h1>
<p>The USGS National Water Information System (NWIS) provides access to surface-water data at approximately 8,500 sites. The data are served online—most in near realtime—to meet many diverse needs. For additional information regarding NWIS, visit the <a class="reference external" href="https://waterdata.usgs.gov/nwis">USGS website</a>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">HydroGenerate.hydropower_potential</span> <span class="kn">import</span> <span class="n">calculate_hp_potential</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="use-streamflow-data-from-a-usgs-stream-gauge">
<h2>Use streamflow data from a USGS stream gauge.<a class="headerlink" href="#use-streamflow-data-from-a-usgs-stream-gauge" title="Permalink to this headline">¶</a></h2>
<p>The USGS has a Python package (<strong><em>dataretrieval</em></strong>) designed to simplify the process of loading hydrologic data into the Python environment. <strong><em>dataretrieval</em></strong> can be pip installed into a Python environment. The example code shows how to donwload data using <strong><em>dataretrieval</em></strong> and format it for hydropower potential evaluation in <strong><em>HydroGenerate</em></strong>. The example used, and additional information, is avlaiable as a <a class="reference external" href="http://www.hydroshare.org/resource/c97c32ecf59b4dff90ef013030c54264">HydroShare Resource</a>. Information about <strong><em>dataretrieval</em></strong> is avaliable directly on the <a class="reference external" href="https://github.com/DOI-USGS/dataretrieval-python">USGS GitHUb Repository</a>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Install dataretrieval, if it doesn&#39;t exist in Python environment, using: </span>
<span class="c1"># !pip install dataretrieval</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># import data retrieval</span>
<span class="kn">from</span> <span class="nn">dataretrieval</span> <span class="kn">import</span> <span class="n">nwis</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Set the parameters needed to retrieve data</span>
<span class="n">siteNumber</span> <span class="o">=</span> <span class="s2">&quot;10109000&quot;</span> <span class="c1"># LOGAN RIVER ABOVE STATE DAM, NEAR LOGAN, UT</span>
<span class="n">parameterCode</span> <span class="o">=</span> <span class="s2">&quot;00060&quot;</span> <span class="c1"># Discharge</span>
<span class="n">startDate</span> <span class="o">=</span> <span class="s2">&quot;2010-01-01&quot;</span>
<span class="n">endDate</span> <span class="o">=</span> <span class="s2">&quot;2020-12-31&quot;</span>

<span class="c1"># Retrieve the data</span>
<span class="n">dailyStreamflow</span> <span class="o">=</span> <span class="n">nwis</span><span class="o">.</span><span class="n">get_dv</span><span class="p">(</span><span class="n">sites</span><span class="o">=</span><span class="n">siteNumber</span><span class="p">,</span> <span class="n">parameterCd</span><span class="o">=</span><span class="n">parameterCode</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="n">startDate</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="n">endDate</span><span class="p">)</span> 
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># convert to pandas dataframe</span>
<span class="n">flow</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">dailyStreamflow</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">flow</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>00060_Mean</th>
      <th>00060_Mean_cd</th>
      <th>site_no</th>
    </tr>
    <tr>
      <th>datetime</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2010-01-01 00:00:00+00:00</th>
      <td>108.0</td>
      <td>A</td>
      <td>10109000</td>
    </tr>
    <tr>
      <th>2010-01-02 00:00:00+00:00</th>
      <td>107.0</td>
      <td>A</td>
      <td>10109000</td>
    </tr>
    <tr>
      <th>2010-01-03 00:00:00+00:00</th>
      <td>106.0</td>
      <td>A</td>
      <td>10109000</td>
    </tr>
    <tr>
      <th>2010-01-04 00:00:00+00:00</th>
      <td>102.0</td>
      <td>A</td>
      <td>10109000</td>
    </tr>
    <tr>
      <th>2010-01-05 00:00:00+00:00</th>
      <td>105.0</td>
      <td>A</td>
      <td>10109000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Use the streamflow data from a USGS stream gauge - Cont.</span>
<span class="c1"># The flow data for this example was created in the previous step. </span>
<span class="n">head</span> <span class="o">=</span> <span class="mi">100</span> <span class="c1"># ft</span>
<span class="n">power</span> <span class="o">=</span> <span class="kc">None</span>
<span class="n">penstock_length</span> <span class="o">=</span> <span class="mi">120</span> <span class="c1"># ft</span>
<span class="n">hp_type</span> <span class="o">=</span> <span class="s1">&#39;Diversion&#39;</span> 
<span class="n">flow_column</span> <span class="o">=</span> <span class="s1">&#39;00060_Mean&#39;</span>  <span class="c1"># name of the column containing the flow data</span>

<span class="n">hp</span> <span class="o">=</span> <span class="n">calculate_hp_potential</span><span class="p">(</span><span class="n">flow</span><span class="o">=</span> <span class="n">flow</span><span class="p">,</span> <span class="n">rated_power</span><span class="o">=</span> <span class="n">power</span><span class="p">,</span> <span class="n">head</span><span class="o">=</span> <span class="n">head</span><span class="p">,</span>
                            <span class="n">penstock_headloss_calculation</span><span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                           <span class="n">hydropower_type</span><span class="o">=</span> <span class="n">hp_type</span><span class="p">,</span> <span class="n">penstock_length</span><span class="o">=</span> <span class="n">penstock_length</span><span class="p">,</span>
                           <span class="n">flow_column</span><span class="o">=</span> <span class="n">flow_column</span><span class="p">,</span> <span class="n">annual_caclulation</span><span class="o">=</span> <span class="kc">True</span><span class="p">)</span>

<span class="c1"># Explore output</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Design flow (cfs):&#39;</span><span class="p">,</span> <span class="n">hp</span><span class="o">.</span><span class="n">design_flow</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Head_loss at design flow (ft):&#39;</span><span class="p">,</span> <span class="nb">round</span><span class="p">(</span><span class="n">hp</span><span class="o">.</span><span class="n">penstock_design_headloss</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Turbine type:&#39;</span><span class="p">,</span> <span class="n">hp</span><span class="o">.</span><span class="n">turbine_type</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Rated Power (Kw):&#39;</span><span class="p">,</span> <span class="nb">round</span><span class="p">(</span><span class="n">hp</span><span class="o">.</span><span class="n">rated_power</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Net head (ft):&#39;</span><span class="p">,</span> <span class="nb">round</span><span class="p">(</span><span class="n">hp</span><span class="o">.</span><span class="n">net_head</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Generator Efficiency:&#39;</span><span class="p">,</span><span class="n">hp</span><span class="o">.</span><span class="n">generator_efficiency</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Head Loss method:&#39;</span><span class="p">,</span><span class="n">hp</span><span class="o">.</span><span class="n">penstock_headloss_method</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Penstock length (ft):&#39;</span><span class="p">,</span> <span class="n">hp</span><span class="o">.</span><span class="n">penstock_length</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Penstock diameter (ft):&#39;</span><span class="p">,</span> <span class="nb">round</span><span class="p">(</span><span class="n">hp</span><span class="o">.</span><span class="n">penstock_diameter</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Runner diameter (ft):&#39;</span><span class="p">,</span> <span class="nb">round</span><span class="p">(</span><span class="n">hp</span><span class="o">.</span><span class="n">runner_diameter</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Pandas dataframe output: </span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">hp</span><span class="o">.</span><span class="n">dataframe_output</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Annual output: </span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">hp</span><span class="o">.</span><span class="n">annual_dataframe_output</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Design flow (cfs): 200.0
Head_loss at design flow (ft): 8.94
Turbine type: Kaplan
Rated Power (Kw): 1385.2
Net head (ft): 91.06
Generator Efficiency: 0.98
Head Loss method: Darcy-Weisbach
Penstock length (ft): 120.0
Penstock diameter (ft): 3.31
Runner diameter (ft): 3.43

Pandas dataframe output: 
                            00060_Mean 00060_Mean_cd   site_no    power_kW  \
datetime                                                                    
2010-01-01 00:00:00+00:00       108.0             A  10109000  798.711407   
2010-01-02 00:00:00+00:00       107.0             A  10109000  791.503752   
2010-01-03 00:00:00+00:00       106.0             A  10109000  784.264006   
2010-01-04 00:00:00+00:00       102.0             A  10109000  754.951157   
2010-01-05 00:00:00+00:00       105.0             A  10109000  776.990580   
...                               ...           ...       ...         ...   
2020-12-27 00:00:00+00:00        91.0             A  10109000  670.556640   
2020-12-28 00:00:00+00:00        85.9             A  10109000  628.909194   
2020-12-29 00:00:00+00:00        83.0             A  10109000  604.325271   
2020-12-30 00:00:00+00:00        82.3             A  10109000  598.283360   
2020-12-31 00:00:00+00:00        90.1             A  10109000  663.342032   

                           turbine_flow_cfs  efficiency    energy_kWh  
datetime                                                               
2010-01-01 00:00:00+00:00             108.0    0.915145           NaN  
2010-01-02 00:00:00+00:00             107.0    0.914911  18996.090056  
2010-01-03 00:00:00+00:00             106.0    0.914648  18822.336153  
2010-01-04 00:00:00+00:00             102.0    0.913246  18118.827764  
2010-01-05 00:00:00+00:00             105.0    0.914352  18647.773908  
...                                     ...         ...           ...  
2020-12-27 00:00:00+00:00              91.0    0.904810  16093.359351  
2020-12-28 00:00:00+00:00              85.9    0.897153  15093.820645  
2020-12-29 00:00:00+00:00              83.0    0.891212  14503.806509  
2020-12-30 00:00:00+00:00              82.3    0.889572  14358.800630  
2020-12-31 00:00:00+00:00              90.1    0.903681  15920.208778  

[4018 rows x 7 columns]
Annual output: 
           annual_turbinedvolume_ft3  mean_annual_effienciency  \
datetime                                                        
2010                    1319.865870                  0.911569   
2011                    1835.676204                  0.913025   
2012                    1442.086842                  0.907819   
2013                    1087.183892                  0.886228   
2014                    1290.223844                  0.904080   
2015                    1208.405282                  0.903002   
2016                    1374.823115                  0.910519   
2017                    1917.789260                  0.913522   
2018                    1416.658356                  0.912469   
2019                    1458.516249                  0.912827   
2020                    1333.259716                  0.911706   

          total_annual_energy_KWh  revenue_M$  capacity_factor  
datetime                                                        
2010                 8.025715e+06    0.089085         0.661405  
2011                 1.085330e+07    0.120472         0.894429  
2012                 8.716206e+06    0.096750         0.718309  
2013                 6.574893e+06    0.072981         0.541842  
2014                 7.818179e+06    0.086782         0.644302  
2015                 7.351202e+06    0.081598         0.605818  
2016                 8.349007e+06    0.092674         0.688048  
2017                 1.131585e+07    0.125606         0.932548  
2018                 8.612223e+06    0.095596         0.709740  
2019                 8.836701e+06    0.098087         0.728239  
2020                 8.123370e+06    0.090169         0.669453  
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Plot results</span>
<span class="c1"># Columns:  discharge_cfs   site_id     power_kW  efficiency   energy_kWh</span>

<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;figure.figsize&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">14</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">hp</span><span class="o">.</span><span class="n">dataframe_output</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>


<span class="n">color_plot</span> <span class="o">=</span> <span class="s1">&#39;tab:red&#39;</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Days&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Flow rate (cfs)&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color_plot</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;turbine_flow_cfs&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Flow rate&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color_plot</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">labelcolor</span><span class="o">=</span><span class="n">color_plot</span><span class="p">)</span>

<span class="n">ax2</span> <span class="o">=</span> <span class="n">ax1</span><span class="o">.</span><span class="n">twinx</span><span class="p">()</span>  <span class="c1"># instantiate a second axes that shares the same x-axis</span>
<span class="n">color_plot2</span> <span class="o">=</span> <span class="s1">&#39;tab:blue&#39;</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Power (kW)&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color_plot2</span><span class="p">)</span>  <span class="c1"># we already handled the x-label with ax1</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;power_kW&#39;</span><span class="p">],</span><span class="s1">&#39;b-&#39;</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;Power&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color_plot2</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">labelcolor</span><span class="o">=</span><span class="n">color_plot2</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">,</span><span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span><span class="n">alpha</span><span class="o">=</span><span class="mf">0.4</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Yearly flow data from USGS and potential power&quot;</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>  <span class="c1"># otherwise the right y-label is slightly clipped</span>
<span class="c1">#plt.savefig(os.path.join(&#39;..&#39;,&#39;fig&#39;,&#39;usgs_twin_falls_flow_power.jpg&#39;))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/UserGuide_4_QueryingDataUSGS-NWIS_8_0.png" src="_images/UserGuide_4_QueryingDataUSGS-NWIS_8_0.png" />
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="UserGuide_3_FlowOptions.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Flow Input Options</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="UserGuide_5_Cost%26Revenue.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Cost and Revenue Calculations</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Idaho National Laboratory<br/>
    
        &copy; Copyright 2021.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>